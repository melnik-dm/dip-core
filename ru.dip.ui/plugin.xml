<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
<extension
         point="org.eclipse.ui.themes">
      <themeElementCategory
            id="ru.dip.editor.themeElementCategory"
            label="Forms Editor">
      </themeElementCategory>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.attribute"
            label="Attribute"
            value="127,0,127">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.background"
            label="Background Selection"
            value="224,238,238">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.cdata"
            label="CDATA"
            value="128,128,128">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.comment"
            label="Comment"
            value="63,95,191">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.tag"
            label="Tag"
            value="63,127,127">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.declaration"
            label="Declaration"
            value="128,128,128">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.commenttag"
            label="Comment Tag"
            value="98,168,166">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.pi"
            label="Processor Instruction"
            value="128,128,128">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.string"
            label="String"
            value="42,0,255">
      </colorDefinition>
      <colorDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            id="ru.dip.xml.color.default"
            label="Default"
            value="0,0,0">
      </colorDefinition>
      <fontDefinition
            categoryId="ru.dip.editor.themeElementCategory"
            defaultsTo="org.eclipse.jface.textfont"
            id="ru.dip.fontDefinition"
            label="Forms Font">
      </fontDefinition>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="ru.dip.ui.wizard.category"
            name="DIP">
      </category>
      <wizard
            category="ru.dip.ui.wizard.category"
            class="ru.dip.ui.wizard.newproject.NewDipProjectWizard"
            icon="icons/table/table.gif"
            id="ru.dip.ui.new.project"
            name="%wizard.new.dip.empty"
            project="true">
      </wizard>
      <wizard
            category="ru.dip.ui.wizard.category"
            class="ru.dip.ui.wizard.demo.NewDemoProjectWizard"
            icon="icons/table/table.gif"
            id="ru.dip.ui.new.project.demo"
            name="%wizard.new.dip.demo"
            project="true">
      </wizard>
      <wizard
            category="ru.dip.ui.wizard.category"
            class="ru.dip.ui.wizard.demo.NewStandardProjectWizard"
            icon="icons/table/table.gif"
            id="ru.dip.ui.new.project.stadart"
            name="%wizard.new.dip.standard"
            project="true">
      </wizard>
      <wizard
            category="ru.dip.ui.wizard.category"
            class="ru.dip.ui.wizard.newfolder.NewFolderWizard"
            icon="icons/wizards/newfolder_icon.png"
            id="ru.dip.new.folder"
            name="%wizard.new.folder">
      </wizard>
      <wizard
            category="ru.dip.ui.wizard.category"
            class="ru.dip.ui.wizard.newfile.NewFileWizard"
            icon="icons/wizards/newfile_icon.png"
            id="ru.dip.ui.new.file"
            name="%wizard.new.file">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewerContentBinding
            viewerId="org.eclipse.ui.navigator.ProjectExplorer">
         <includes>
            <contentExtension
                  isRoot="true"
                  pattern="ru.dip.ui.navigatorContent">
            </contentExtension>
            <contentExtension
                  isRoot="true"
                  pattern="ru.dip.ui.reserved.filter">
            </contentExtension>
            <contentExtension
                  isRoot="true"
                  pattern="ru.dip.ui.shema.filter">
            </contentExtension>
            <contentExtension
                  isRoot="true"
                  pattern="ru.dip.ui.description.filter">
            </contentExtension>
            <contentExtension
                  isRoot="true"
                  pattern="ru.dip.ui.comment.filter">
            </contentExtension>
            <contentExtension
                  pattern="ru.dip.ui.linkHelper">
            </contentExtension>
            <actionExtension
                  pattern="ru.dip.ui.linkHelper">
            </actionExtension>
         </includes>
      </viewerContentBinding>
      <dragAssistant
            class="ru.dip.ui.navigator.RequireementCommonDragAdapterAssistant"
            viewerId="org.eclipse.ui.navigator.ProjectExplorer">
      </dragAssistant>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <navigatorContent
            activeByDefault="true"
            contentProvider="ru.dip.ui.navigator.NavigatorContentProvider"
            id="ru.dip.ui.navigatorContent"
            labelProvider="ru.dip.ui.navigator.NavigatorLabelProvider"
            name="DIP"
            priority="highest">
         <triggerPoints>
            <or>
               <and>
                  <instanceof
                        value="org.eclipse.core.resources.IProject">
                  </instanceof>
                  <test property="org.eclipse.core.resources.projectNature"
                        value="ru.dip.nature">
                  </test></and>
               <instanceof
                     value="java.lang.Object">
               </instanceof>
               <instanceof
                     value="WorkspaceRoot">
               </instanceof>
            </or>
                
         </triggerPoints>
         <possibleChildren>
            <or>
               <instanceof
                     value="ru.dip.core.model.interfaces.IDipElement">
               </instanceof>
               <instanceof
                     value="org.eclipse.core.resources.IResource">
               </instanceof>
               <instanceof
                     value="java.lang.Object">
               </instanceof>
            </or>
         </possibleChildren>
         <dropAssistant
               class="ru.dip.ui.navigator.DipDocElementCommonDropAdapterAssistant"
               id="ru.dip.ui.dropAssistant">
            <possibleDropTargets>
               <or>
                  <adapt
                        type="org.eclipse.core.resources.IFile">
                  </adapt>
                  <adapt
                        type="org.eclipse.core.resources.IFolder">
                  </adapt>
                  <adapt
                        type="org.eclipse.core.resources.IProject">
                  </adapt>
                  <instanceof
                        value="ru.dip.core.model.interfaces.IDipElement">
                  </instanceof>
                  <instanceof
                        value="org.eclipse.core.resources.IResource">
                  </instanceof>
               </or></possibleDropTargets>
         </dropAssistant>
         <actionProvider
               class="ru.dip.ui.navigator.EditActionProvider">
            <enablement>
               <or>
                  <instanceof
                        value="ru.dip.core.model.interfaces.IDipElement">
                  </instanceof>
               </or>
            </enablement>
         </actionProvider>
         <actionProvider
               class="ru.dip.ui.navigator.OpenAtionProvider">
         </actionProvider>
         <actionProvider
               class="ru.dip.ui.navigator.RefrshActionProvider">
            <enablement>
               <or>
                  <instanceof
                        value="ru.dip.core.model.interfaces.IDipElement">
                  </instanceof>
               </or>
            </enablement>
         </actionProvider>
         <commonWizard
               type="new"
               wizardId="ru.dip.new.folder">
            <enablement>
               <or>
                  <instanceof
                        value="ru.dip.core.model.DipProject">
                  </instanceof>
                  <instanceof
                        value="ru.dip.core.model.DipFolder">
                  </instanceof>
                  <instanceof
                        value="ru.dip.core.model.DipUnit">
                  </instanceof>
               </or></enablement>
         </commonWizard>
         <commonWizard
               type="new"
               wizardId="ru.dip.ui.new.file">
            <enablement>
               <or>
                  <instanceof
                        value="ru.dip.core.model.DipProject">
                  </instanceof>
                  <instanceof
                        value="ru.dip.core.model.DipFolder">
                  </instanceof>
                  <instanceof
                        value="ru.dip.core.model.DipUnit">
                  </instanceof>
               </or></enablement>
         </commonWizard>
         <commonSorter
               class="ru.dip.ui.navigator.NavigatorViewerSorter">
         </commonSorter>
         <actionProvider
               class="ru.dip.ui.navigator.HideActionProvider">
         </actionProvider>
         <actionProvider
               class="ru.dip.ui.navigator.RefactoringActionProvider">
            <enablement>
               <or>
                  <instanceof
                        value="ru.dip.core.model.interfaces.IDipElement">
                  </instanceof>
               </or>
            </enablement>
         </actionProvider>
         <dropAssistant
               class="ru.dip.ui.navigator.NavigatorDropAdapterAssistant"
               id="ru.dip.ui.navigator.dropAssistant">
            <possibleDropTargets>
               <or>
                  <instanceof
                        value="java.lang.Object">
                  </instanceof>
                  <instanceof
                        value="org.eclipse.core.internal.resources.WorkspaceRoot">
                  </instanceof>
               </or>
            </possibleDropTargets>
         </dropAssistant>
      </navigatorContent>
      <commonFilter
            activeByDefault="true"
            class="ru.dip.ui.navigator.filter.ReservedFilter"
            id="ru.dip.ui.reserved.filter"
            name="%navigator.filter.reserved"
            visibleInUI="true">
      </commonFilter>
      <commonFilter
            activeByDefault="false"
            class="ru.dip.ui.navigator.filter.ShemaFilter"
            id="ru.dip.ui.shema.filter"
            name="%navigator.filter.schema"
            visibleInUI="true">
      </commonFilter>
      <commonFilter
            activeByDefault="true"
            class="ru.dip.ui.navigator.filter.DescriptionFilter"
            id="ru.dip.ui.description.filter"
            name="%navigator.filter.description"
            visibleInUI="true">
      </commonFilter>
      <commonFilter
            activeByDefault="true"
            class="ru.dip.ui.navigator.filter.CommentFilter"
            id="ru.dip.ui.comment.filter"
            name="%navigator.filter.comment"
            visibleInUI="true">
      </commonFilter>
   </extension>
   <extension
         point="org.eclipse.ui.activities">
      <activityPatternBinding
            activityId="ru.dip.disabled.folder"
            isEqualityPattern="false"
            pattern=".*/org.eclipse.ui.wizards.new.folder">
      </activityPatternBinding>
      <activity
            id="ru.dip.disabled.folder"
            name="Standard Wizard Disable Folder">
         <enabledWhen>
            <with
                  variable="selection">
               <not>
                  <iterate
                        operator="and">
                     <instanceof
                           value="ru.dip.core.model.interfaces.IDipElement">
                     </instanceof>
                  </iterate>
               </not>
            </with>
         </enabledWhen>
      </activity>
      <activityPatternBinding
            activityId="ru.dip.disabled.file"
            isEqualityPattern="false"
            pattern=".*/org.eclipse.ui.wizards.new.file">
      </activityPatternBinding>
      <activity
            id="ru.dip.disabled.file"
            name="Standard Wizard Disable File">
         <enabledWhen>
            <with
                  variable="selection">
               <not>
                  <iterate
                        operator="and">
                     <instanceof
                           value="ru.dip.core.model.interfaces.IDipElement">
                     </instanceof>
                  </iterate>
               </not>
            </with>
         </enabledWhen>
      </activity>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="ru.dip.ui.table.editor.DipTableEditor"
            contributorClass="ru.dip.ui.table.editor.DipTableActionContributor"
            default="false"
            filenames="table"
            icon="icons/table/table.gif"
            id="ru.dip.editor.table"
            matchingStrategy="ru.dip.ui.table.editor.TableMatchingStrategy"
            name="%editor.document">
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.elementFactories">
      <factory
            class="ru.dip.ui.table.editor.TableEditorFactory"
            id="ru.dip.table.factory">
      </factory>
   </extension>
 <extension
       point="org.eclipse.ui.themes">
    <themeElementCategory
          id="ru.dip.theme.table"
          label="Dip Viewer">
    </themeElementCategory>
    <colorDefinition
          categoryId="ru.dip.theme.table"
          id="ru.dip.ui.color.table1"
          label="Цвет таблицы 1"
          value="255,255,255">
    </colorDefinition>
    <colorDefinition
          categoryId="ru.dip.theme.table"
          id="ru.dip.ui.color.table2"
          label="Цвет таблицы 2"
          value="238,238,236">
    </colorDefinition>
    <colorDefinition
          categoryId="ru.dip.theme.table"
          id="ru.dip.ui.color.table.selection"
          label="Выделенная ячейка"
          value="255,238,166">
    </colorDefinition>
 </extension>
 <extension
       point="org.eclipse.ui.importWizards">
    <category
          id="ru.dip.ui.import"
          name="DIP">
    </category>
    <wizard
          category="ru.dip.ui.import"
          class="ru.dip.ui.wizard.importproject.ImportDipProjectWizard"
          icon="icons/table/table.gif"
          id="ru.dip.ui.import.project"
          name="%wizard.import.dip">
    </wizard>
    <wizard
          category="ru.dip.ui.import"
          class="ru.dip.ui.wizard.importproject.ImportProjectFromGit"
          icon="icons/table/table.gif"
          id="ru.dip.ui.import.project"
          name="%wizard.import.dip.git">
    </wizard>
 </extension>
 <extension
       point="org.eclipse.ui.preferencePages">
    <page
          class="ru.dip.ui.preferences.DipPreferencesPage"
          id="ru.dip.ui.preferences.dit"
          name="%preferences.page.dip">
    </page>
    <page
          category="ru.dip.ui.preferences.dit"
          class="ru.dip.ui.preferences.MdPreferencePage"
          id="ru.dip.ui.preferences.markdown"
          name="%preferences.page.markdown">
    </page>
    <page
          category="ru.dip.ui.preferences.dit"
          class="ru.dip.ui.preferences.FormEditorPreferencePage"
          id="ru.dip.ui.preferences.reqeditor"
          name="%preferences.page.xml">
    </page>
 </extension>
 <extension
       point="org.eclipse.ui.commands">
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.idopen"
          name="Open by ID">
    </command>
    <category
          id="ru.dip.ui.dip.category"
          name="DIP">
    </category>
    <command
          id="ru.dip.ui.report"
          name="Report">
    </command>
    <command
          id="ru.dip.ui.gloss.edit"
          name="Edit Glossary Field">
    </command>
    <command
          id="ru.dip.ui.gloss.newfield"
          name="New Glossary Field">
    </command>
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.gloss.table"
          name="Open Glossary">
    </command>
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.gloss.addtext"
          name="Add Text Glossary Field">
    </command>
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.idshow"
          name="Show by ID">
    </command>
    <command
          id="ru.dip.ui.convertodip"
          name="Convert to DIP">
    </command>
    <command
          id="ru.dip.ui.convertonodip"
          name="Convert to no DIP Project">
    </command>
    <command
          id="ru.dip.ui.command.add_to_document"
          name="Add To Document">
    </command>
    <command
          id="ru.dip.ui.diff_mode"
          name="DipDiff">
       <commandParameter
             id="ru.dip.diff.mode.paremeter.show_only_chaging"
             name="show_only_chaging"
             optional="true">
       </commandParameter>
       <commandParameter
             id="ru.dip.diff.mode.paremeter.commit"
             name="commit"
             optional="true">
       </commandParameter>
    </command>
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.command.copy.id"
          name="Copy Id">
    </command>
    <command
          id="ru.dip.ui.command.export.diff"
          name="Diff Export">
    </command>
    <command
          id="ru.dip.ui.command.usbkey"
          name="UsbKey">
    </command>
    <command
          id="ru.dip.ui.command.variables.add"
          name="Add Variable">
    </command>
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.command.var.open.container"
          name="Open Variables">
    </command>
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.command.variables.edit"
          name="Edit Variable">
    </command>
    <command
          categoryId="ru.dip.ui.dip.category"
          id="ru.dip.ui.command.var.create.container"
          name="Add Var Container">
    </command>
    <command
          id="ru.dip.ui.report.new.folder"
          name="Add Report Folder">
    </command>
    <command
          id="ru.dip.ui.command.new.schema"
          name="New schema">
    </command>
 </extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          locationURI="popup:common.new.menu?after=additions">
       <command
             commandId="ru.dip.ui.report"
             icon="icons/wizards/newfile_icon.png"
             label="Report"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         operator="or">
                      <or>
                         <instanceof
                               value="ru.dip.core.model.DipProject">
                         </instanceof>
                         <instanceof
                               value="ru.dip.core.model.reports.IReportContainer">
                         </instanceof>
                         <instanceof
                               value="ru.dip.core.model.DipFolder">
                         </instanceof>
                      </or>
                   </iterate>
                </with>
                <test
                      forcePluginActivation="true"
                      property="ru.dip.english">
                </test>
             </and>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.report"
             icon="icons/wizards/newfile_icon.png"
             label="Отчёт"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         operator="or">
                      <or>
                         <instanceof
                               value="ru.dip.core.model.DipProject">
                         </instanceof>
                         <instanceof
                               value="ru.dip.core.model.reports.IReportContainer">
                         </instanceof>
                         <instanceof
                               value="ru.dip.core.model.DipFolder">
                         </instanceof>
                      </or>
                   </iterate>
                </with>
                <test
                      forcePluginActivation="true"
                      property="ru.dip.russian">
                </test>
             </and>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.command.var.create.container"
             icon="icons/variables_container.gif"
             label="%menu.new.var.container"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         operator="or">
                      <instanceof
                            value="ru.dip.core.model.DipFolder">
                      </instanceof>
                   </iterate>
                </with></and>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.command.new.schema"
             label="%menu.new.schema"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         operator="or">
                      <instanceof
                            value="ru.dip.core.model.DipSchemaFolder">
                      </instanceof>
                   </iterate>
                </with>
             </and>
          </visibleWhen>
       </command>
    </menuContribution>
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.ui.popup.any?before=group.edit">
       <command
             commandId="ru.dip.ui.gloss.edit"
             label="%menu.edit"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <with
                   variable="activeMenuSelection">
                <iterate
                      operator="or">
                   <instanceof
                         value="ru.dip.core.model.glossary.GlossaryField">
                   </instanceof>
                </iterate>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.gloss.table"
             label="%menu.open"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <with
                   variable="activeMenuSelection">
                <iterate
                      operator="or">
                   <instanceof
                         value="ru.dip.core.model.glossary.GlossaryFolder">
                   </instanceof>
                </iterate>
             </with>
          </visibleWhen>
       </command>
       <menu
             label="%menu.new">
          <command
                commandId="ru.dip.ui.gloss.newfield"
                label="%menu.new.term"
                style="push">
          </command>
          <visibleWhen
                checkEnabled="false">
             <with
                   variable="activeMenuSelection">
                <iterate
                      operator="or">
                   <or>
                      <instanceof
                            value="ru.dip.core.model.glossary.GlossaryFolder">
                      </instanceof>
                      <instanceof
                            value="ru.dip.core.model.glossary.GlossaryField">
                      </instanceof>
                   </or>
                </iterate>
             </with>
          </visibleWhen>
       </menu>
       <menu
             label="%menu.new">
          <command
                commandId="ru.dip.ui.command.variables.add"
                label="%menu.new.var"
                style="push">
          </command>
          <visibleWhen
                checkEnabled="false">
             <with
                   variable="activeMenuSelection">
                <iterate
                      operator="or">
                   <or>
                      <instanceof
                            value="ru.dip.core.model.vars.Variable">
                      </instanceof>
                      <instanceof
                            value="ru.dip.core.model.vars.IVarContainer">
                      </instanceof>
                   </or>
                </iterate>
             </with>
          </visibleWhen>
       </menu>
       <command
             commandId="ru.dip.ui.command.var.open.container"
             label="%menu.open"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <with
                   variable="activeMenuSelection">
                <iterate
                      operator="or">
                   <instanceof
                         value="ru.dip.core.model.vars.IVarContainer">
                   </instanceof>
                </iterate>
             </with>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.command.variables.edit"
             label="%menu.edit"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <with
                   variable="activeMenuSelection">
                <iterate
                      operator="or">
                   <instanceof
                         value="ru.dip.core.model.vars.Variable">
                   </instanceof>
                </iterate>
             </with>
          </visibleWhen>
       </command>
       <menu
             label="Создать">
          <command
                commandId="ru.dip.ui.report"
                icon="icons/wizards/newfile_icon.png"
                label="Отчёт"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <and>
                   <with
                         variable="activeMenuSelection">
                      <iterate
                            operator="or">
                         <or>
                            <instanceof
                                  value="ru.dip.core.model.DipProject">
                            </instanceof>
                            <instanceof
                                  value="ru.dip.core.model.reports.IReportContainer">
                            </instanceof>
                         </or>
                      </iterate>
                   </with>
                   <test
                         forcePluginActivation="true"
                         property="ru.dip.russian">
                   </test>
                </and>
             </visibleWhen>
          </command>
          <visibleWhen
                checkEnabled="false">
             <with
                   variable="activeMenuSelection">
                <iterate
                      operator="or">
                   <or>
                      <instanceof
                            value="ru.dip.core.model.reports.IReportContainer">
                      </instanceof>
                   </or>
                </iterate>
             </with>
          </visibleWhen>
          <command
                commandId="ru.dip.ui.report"
                icon="icons/wizards/newfile_icon.png"
                label="Report"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <and>
                   <with
                         variable="activeMenuSelection">
                      <iterate
                            operator="or">
                         <or>
                            <instanceof
                                  value="ru.dip.core.model.DipProject">
                            </instanceof>
                            <instanceof
                                  value="ru.dip.core.model.reports.IReportContainer">
                            </instanceof>
                         </or>
                      </iterate>
                   </with>
                   <test
                         forcePluginActivation="true"
                         property="ru.dip.english">
                   </test>
                </and>
             </visibleWhen>
          </command>
       </menu>
    </menuContribution>
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.ui.popup.any?before=group.edit">
       <command
             commandId="ru.dip.ui.gloss.addtext"
             label="Add to Glossary"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate>
                      <and>
                         <instanceof
                               value="org.eclipse.jface.text.TextSelection">
                         </instanceof>
                         <test
                               forcePluginActivation="true"
                               property="ru.dip.add_gloss_entry">
                         </test>
                      </and>
                   </iterate>
                </with>
                <test
                      property="ru.dip.english">
                </test>
             </and>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.gloss.addtext"
             label="Добавить в Глоссарий"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate>
                      <and>
                         <instanceof
                               value="org.eclipse.jface.text.TextSelection">
                         </instanceof>
                         <test
                               forcePluginActivation="true"
                               property="ru.dip.add_gloss_entry">
                         </test>
                      </and>
                   </iterate>
                </with>
                <test
                      property="ru.dip.russian">
                </test>
             </and>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.gloss.edit"
             label="Edit Glossary Entry"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate>
                      <and>
                         <instanceof
                               value="org.eclipse.jface.text.TextSelection">
                         </instanceof>
                         <test
                               forcePluginActivation="true"
                               property="ru.dip.edit_gloss_entry">
                         </test>
                      </and>
                   </iterate>
                </with>
                <test
                      property="ru.dip.english">
                </test>
             </and>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.gloss.edit"
             label="Редактировать запись в глоссарии"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate>
                      <and>
                         <instanceof
                               value="org.eclipse.jface.text.TextSelection">
                         </instanceof>
                         <test
                               forcePluginActivation="true"
                               property="ru.dip.edit_gloss_entry">
                         </test>
                      </and>
                   </iterate>
                </with>
                <test
                      property="ru.dip.russian">
                </test>
             </and>
          </visibleWhen>
       </command>
    </menuContribution>
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.ui.popup.any?before=group.edit">
       <command
             commandId="ru.dip.ui.command.add_to_document"
             label="Add to Document"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate>
                      <and>
                         <instanceof
                               value="org.eclipse.core.resources.IFolder">
                         </instanceof>
                         <test
                               property="org.eclipse.core.resources.projectNature "
                               value="ru.dip.requirement.nature">
                         </test>
                      </and>
                   </iterate>
                </with>
                <test
                      property="ru.dip.english">
                </test>
             </and>
          </visibleWhen>
       </command>
       <command
             commandId="ru.dip.ui.command.add_to_document"
             label="Добавить в Документ"
             style="push">
          <visibleWhen
                checkEnabled="false">
             <and>
                <with
                      variable="activeMenuSelection">
                   <iterate>
                      <and>
                         <instanceof
                               value="org.eclipse.core.resources.IFolder">
                         </instanceof>
                         <test
                               property="org.eclipse.core.resources.projectNature "
                               value="ru.dip.requirement.nature">
                         </test>
                      </and>
                   </iterate>
                </with>
                <test
                      property="ru.dip.russian">
                </test>
             </and>
          </visibleWhen>
       </command>
    </menuContribution>
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.egit.ui.historyPageContributions?after=history.group">
       <menu
             label="DIP Document">
          <visibleWhen
                checkEnabled="false">
             <test
                   forcePluginActivation="true"
                   property="ru.dip.english">
             </test>
          </visibleWhen>
          <menu
                label="Mark Changed">
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="With selected commit"
                   style="push">
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="HEAD"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="head">
                </parameter>
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="origin/&lt;current branch&gt;"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="origin_head">
                </parameter>
             </command>
          </menu>
          <menu
                label="Only  Changed Objects">
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="With selected commit"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.show_only_chaging"
                      value="true">
                </parameter>
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="HEAD"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.show_only_chaging"
                      value="true">
                </parameter>
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="head">
                </parameter>
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="origin/&lt;current branch&gt;"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="origin_head">
                </parameter>
                <parameter
                      name="ru.dip.diff.mode.paremeter.show_only_chaging"
                      value="true">
                </parameter>
             </command>
          </menu>
          <command
                commandId="ru.dip.ui.command.export.diff"
                label="Diff Export"
                style="push">
          </command>
       </menu>
       <menu
             label="DIP-документ">
          <visibleWhen
                checkEnabled="false">
             <test
                   forcePluginActivation="true"
                   property="ru.dip.russian">
             </test>
          </visibleWhen>
          <menu
                label="Отметить изменения ">
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="К выделенному коммиту"
                   style="push">
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="HEAD"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="head">
                </parameter>
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="origin/&lt;current branch&gt;"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="origin_head">
                </parameter>
             </command>
          </menu>
          <menu
                label="Показать только изменения">
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="К выделенному коммиту"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.show_only_chaging"
                      value="true">
                </parameter>
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="HEAD"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.show_only_chaging"
                      value="true">
                </parameter>
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="head">
                </parameter>
             </command>
             <command
                   commandId="ru.dip.ui.diff_mode"
                   label="origin/&lt;current branch&gt;"
                   style="push">
                <parameter
                      name="ru.dip.diff.mode.paremeter.commit"
                      value="origin_head">
                </parameter>
                <parameter
                      name="ru.dip.diff.mode.paremeter.show_only_chaging"
                      value="true">
                </parameter>
             </command>
          </menu>
          <command
                commandId="ru.dip.ui.command.export.diff"
                label="Экспорт изменений в docx"
                style="push">
          </command>
       </menu>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="ru.dip.ui.action.open.OpenByIdHandler"
          commandId="ru.dip.ui.idopen">
    </handler>
    <handler
          class="ru.dip.ui.handlers.NewReportHandler"
          commandId="ru.dip.ui.report">
    </handler>
    <handler
          class="ru.dip.ui.handlers.GlossEditHandler"
          commandId="ru.dip.ui.gloss.edit">
    </handler>
    <handler
          class="ru.dip.ui.handlers.NewGlossFieldHandler"
          commandId="ru.dip.ui.gloss.newfield">
    </handler>
    <handler
          class="ru.dip.ui.handlers.OpenGlossTableHandler"
          commandId="ru.dip.ui.gloss.table">
    </handler>
    <handler
          class="ru.dip.ui.handlers.AddGlossEntryFromTextHandler"
          commandId="ru.dip.ui.gloss.addtext">
    </handler>
    <handler
          class="ru.dip.ui.action.open.ShowByIdHandler"
          commandId="ru.dip.ui.idshow">
    </handler>
    <handler
          class="ru.dip.ui.handlers.ConvertToDipHandler"
          commandId="ru.dip.ui.convertodip">
    </handler>
    <handler
          class="ru.dip.ui.handlers.ConverToNoDipHandler"
          commandId="ru.dip.ui.convertonodip">
    </handler>
    <handler
          class="ru.dip.ui.handlers.DiffModeHandler"
          commandId="ru.dip.ui.diff_mode">
    </handler>
    <handler
          class="ru.dip.ui.handlers.CopyIdHandler"
          commandId="ru.dip.ui.command.copy.id">
    </handler>
    <handler
          class="ru.dip.ui.handlers.DiffExportHandler"
          commandId="ru.dip.ui.command.export.diff">
       <enabledWhen>
          <count
                value="2">
          </count>
       </enabledWhen>
    </handler>
    <handler
          class="ru.dip.ui.handlers.FormHandler"
          commandId="ru.dip.ui.command.usbkey">
    </handler>
    <handler
          class="ru.dip.ui.handlers.NewVariableHandler"
          commandId="ru.dip.ui.command.variables.add">
    </handler>
    <handler
          class="ru.dip.ui.handlers.OpenVarContainerHandlers"
          commandId="ru.dip.ui.command.var.open.container">
    </handler>
    <handler
          class="ru.dip.ui.handlers.VariableEditHandler"
          commandId="ru.dip.ui.command.variables.edit">
    </handler>
    <handler
          class="ru.dip.ui.handlers.CreateVarContainerHandler"
          commandId="ru.dip.ui.command.var.create.container">
    </handler>
    <handler
          class="ru.dip.ui.handlers.NewSchemaHandler"
          commandId="ru.dip.ui.command.new.schema">
    </handler>
 </extension>
 <extension
       point="org.eclipse.ui.bindings">
    <key
          commandId="ru.dip.ui.idopen"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+7">
    </key>
    <key
          commandId="ru.dip.ui.gloss.table"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+8">
    </key>
    <key
          commandId="ru.dip.ui.idshow"
          contextId="org.eclipse.ui.contexts.window"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+6">
    </key>
    <key
          commandId="ru.dip.ui.command.copy.id"
          contextId="ru.dip.ui.context.dip"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="CTRL+SHIFT+C">
    </key>
 </extension>
 <extension
       point="org.eclipse.ui.views">
    <view
          category="ru.dip.views.category"
          class="ru.dip.ui.glossary.GlossaryView"
          icon="icons/view/glossfolder.png"
          id="ru.dip.ui.view.glossary"
          name="%view.glossary"
          restorable="true">
    </view>
    <stickyView
          closeable="true"
          id="ru.dip.ui.view.glossary"
          location="BOTTOM"
          moveable="true">
    </stickyView>
    <view
          category="ru.dip.views.category"
          class="ru.dip.ui.markview.MarkView"
          icon="icons/view/bookmark_view.png"
          id="ru.dip.ui.view.marks"
          name="%view.marks"
          restorable="true">
    </view>
    <view
          category="ru.dip.views.category"
          class="ru.dip.ui.variable.view.VariablesView"
          icon="icons/view/variables_container.gif"
          id="ru.dip.ui.view.variables"
          name="%view.vars"
          restorable="true">
    </view>
    <stickyView
          closeable="true"
          id="ru.dip.ui.view.variables"
          location="BOTTOM"
          moveable="true">
    </stickyView>
 </extension>
 <extension
       point="org.eclipse.core.expressions.propertyTesters">
    <propertyTester
          class="ru.dip.ui.test.AddGlossEntryTester"
          id="ru.dip.ui.gloss.addtest"
          namespace="ru.dip"
          properties="add_gloss_entry"
          type="org.eclipse.jface.viewers.ISelection">
    </propertyTester>
    <propertyTester
          class="ru.dip.ui.test.EditGlossEntryTester"
          id="ru.dip.ui.gloss.edittest"
          namespace="ru.dip"
          properties="edit_gloss_entry"
          type="org.eclipse.jface.viewers.ISelection">
    </propertyTester>
    <propertyTester
          class="ru.dip.ui.test.EditGlossEntryTester"
          id="ru.dip.ui.gloss.edittest"
          namespace="ru.dip"
          properties="add_gloss_entry"
          type="org.eclipse.jface.viewers.ISelection">
    </propertyTester>
    <propertyTester
          class="ru.dip.ui.test.EditGlossEntryTester"
          id="ru.dip.ui.gloss.addtest"
          namespace="ru.dip"
          properties="add_gloss_entry"
          type="org.eclipse.jface.viewers.ISelection">
    </propertyTester>
 </extension>
 <extension
       point="org.eclipse.ui.workbench.texteditor.hyperlinkDetectors">
    <hyperlinkDetector
          activate="true"
          class="ru.dip.ui.action.hyperlink.HyperlinkDetector"
          id="ru.dip.editors.hyperlinkDetector"
          name="Req Link"
          targetId="org.eclipse.ui.DefaultTextEditor">
    </hyperlinkDetector>
 </extension>
 <extension
       point="org.eclipse.ltk.core.refactoring.renameParticipants">
    <renameParticipant
          class="ru.dip.ui.navigator.ServReqRenameParticipant"
          id="ru.dip.ui.renameParticipant1"
          name="%Refactoring.NLSFieldRenameParticipant">
       <enablement>
          <with
                variable="element">
             <instanceof
                   value="org.eclipse.core.resources.IResource">
             </instanceof>
          </with>
       </enablement>
    </renameParticipant>
    <renameParticipant
          class="ru.dip.ui.RenameParticipant2"
          id="ru.dip.ui.renameParticipant2"
          name="name">
       <enablement>
          <with
                variable="element">
             <instanceof
                   value="org.eclipse.core.resources.IDipElement">
             </instanceof>
          </with>
       </enablement>
    </renameParticipant>
 </extension>
 <extension
       point="org.eclipse.ui.perspectives">
    <perspective
          class="ru.dip.ui.DIPPerspectiveFactory"
          id="ru.dip.ui.dip.perspective"
          name="DIP">
    </perspective>
 </extension>
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          allPopups="false"
          locationURI="popup:org.eclipse.ui.popup.any">
       <menu
             label="Конвертировать">
          <command
                commandId="ru.dip.ui.convertonodip"
                label="Конвертировать в обычный проект (не DIP)"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <iterate
                      operator="and">
                   <instanceof
                         value="ru.dip.core.model.DipProject">
                   </instanceof>
                   <test
                         property="ru.dip.russian">
                   </test>
                </iterate>
             </visibleWhen>
          </command>
          <command
                commandId="ru.dip.ui.convertodip"
                label="Конвертировать в DIP-проект"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <iterate
                      operator="and">
                   <instanceof
                         value="org.eclipse.core.resources.IProject">
                   </instanceof>
                   <test
                         forcePluginActivation="true"
                         property="ru.dip.russian"
                         value="true">
                   </test>
                </iterate>
             </visibleWhen>
          </command>
          <visibleWhen
                checkEnabled="false">
             <iterate
                   operator="and">
                <test
                      property="ru.dip.russian">
                </test>
             </iterate>
          </visibleWhen>
       </menu>
       <menu
             label="Convert">
          <command
                commandId="ru.dip.ui.convertodip"
                label="Convert to DIP Project"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <iterate
                      operator="and">
                   <instanceof
                         value="org.eclipse.core.resources.IProject">
                   </instanceof>
                   <test
                         forcePluginActivation="true"
                         property="ru.dip.english"
                         value="true">
                   </test>
                </iterate>
             </visibleWhen>
          </command>
          <command
                commandId="ru.dip.ui.convertonodip"
                label="Convert to non-DIP Project"
                style="push">
             <visibleWhen
                   checkEnabled="false">
                <iterate
                      operator="and">
                   <instanceof
                         value="ru.dip.core.model.DipProject">
                   </instanceof>
                   <test
                         property="ru.dip.english">
                   </test>
                </iterate>
             </visibleWhen>
          </command>
          <visibleWhen
                checkEnabled="false">
             <iterate
                   operator="and">
                <test
                      property="ru.dip.english">
                </test>
             </iterate>
          </visibleWhen>
       </menu>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.ui.navigator.linkHelper">
    <linkHelper
          class="ru.dip.ui.navigator.ReqLinkHelper"
          id="ru.dip.ui.linkHelper">
                 <selectionEnablement>
                    <or>
                       <instanceof
                             value="ru.dip.core.model.interfaces.IDipElement">
                       </instanceof>
                    </or>
          </selectionEnablement>
          <editorInputEnablement>
             <or>
                <instanceof
                      value="org.eclipse.ui.IFileEditorInput">
                </instanceof>
                <instanceof
                      value="ru.dip.ui.table.editor.TableEditorInput">
                </instanceof>
             </or>
          </editorInputEnablement>
    </linkHelper>
 </extension>
 <extension
       point="org.eclipse.ui.views">
    <view
          category="ru.dip.views.category"
          class="ru.dip.ui.toc.DipTocView"
          icon="icons/view/list.png"
          id="ru.dip.ui.diptoc"
          name="%view.toc"
          restorable="true">
    </view>
    <stickyView
          closeable="true"
          id="ru.dip.ui.diptoc"
          location="LEFT"
          moveable="true">
    </stickyView>
 </extension>
 <extension
       point="org.eclipse.ui.views">
    <view
          category="ru.dip.views.category"
          class="ru.dip.ui.imageview.ImagesView"
          icon="icons/view/images.gif"
          id="ru.dip.ui.images"
          name="%view.images"
          restorable="true">
    </view>
    <stickyView
          closeable="true"
          id="ru.dip.ui.images"
          location="BOTTOM"
          moveable="true">
    </stickyView>
 </extension>
 <extension
       point="org.eclipse.ui.views">
    <view
          category="ru.dip.views.category"
          class="ru.dip.ui.imageview.TablesView"
          icon="icons/view/table.gif"
          id="ru.dip.ui.tables"
          name="%view.tables"
          restorable="true">
    </view>
    <stickyView
          closeable="true"
          id="ru.dip.ui.tables"
          location="BOTTOM"
          moveable="true">
    </stickyView>
 </extension>
 <extension
       point="org.eclipse.ui.decorators">
    <decorator
          adaptable="false"
          class="ru.dip.ui.navigator.decorator.ReadOnlyDecorator"
          id="ru.dip.readonly.decorator"
          label="Read Only Decorator"
          lightweight="false"
          objectClass="ru.dip.core.model.interfaces.IDipElement"
          state="true">
       <enablement>
          <objectState
                name="ru.dip.ui.objectState4"
                value="ru.dip.ui.objectState4">
          </objectState>
       </enablement>
    </decorator>
    <decorator
          adaptable="false"
          class="ru.dip.ui.navigator.decorator.ErrorIncludeDecorator"
          id="ru.dip.error.include.decorator"
          label="Error Include Decorator"
          lightweight="false"
          objectClass="ru.dip.core.model.IncludeFolder"
          state="true">
       <enablement>
          <objectState
                name="ru.dip.ui.objectState4"
                value="ru.dip.ui.objectState4">
          </objectState>
       </enablement>
    </decorator>
    <decorator
          class="ru.dip.ui.navigator.decorator.ErrorDecorator"
          id="ru.dip.error.decorator"
          label="Error Decorator">
       <enablement>
          <objectState
                name="ru.dip.ui.objectState1"
                value="ru.dip.ui.objectState1">
          </objectState>
       </enablement>
    </decorator>
 </extension>
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="ru.dip.ui.handlers.AddToDocumentHandler"
          commandId="ru.dip.ui.command.add_to_document">
    </handler>
 </extension>
 <extension
       point="org.eclipse.ui.exportWizards">
    <category
          id="ru.dip.export.wizard.category"
          name="DIP">
    </category>
    <wizard
          category="ru.dip.export.wizard.category"
          class="ru.dip.ui.wizard.export.DocxExportWizard"
          icon="icons/wizards/file.gif"
          id="ru.dip.ui.export.docx"
          name="%wizard.export.dip.docx">
       <description>
          Экспорт из DIP-проекта в docx
       </description>
    </wizard>
 </extension>
 <extension
       point="org.eclipse.ui.decorators">
    <decorator
          adaptable="true"
          class="ru.dip.ui.temp.FolderDecorator"
          id="ru.dip.ui.decorator.folder"
          label="Folder Decorator"
          location="REPLACE"
          objectClass="ru.dip.core.model.interfaces.IDipDocumentElement"
          state="true">
    </decorator>
 </extension>
 <extension
       point="org.eclipse.ui.contexts">
    <context
          id="ru.dip.ui.context.dip"
          name="DIP">
    </context>
 </extension>

</plugin>
